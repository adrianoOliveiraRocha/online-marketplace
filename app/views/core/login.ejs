<!DOCTYPE html>
<html lang="en">

  <head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  </head>

  <body>
    
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">Navbar</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Entrar</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/register">Registrar-se</a>
          </li>          
        </ul>
      </div>
    </nav>

    <div class='container'>

      <% if(msg){ %>
        <div class="alert alert-success alert-dismissible">
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          <strong>Mensagem!</strong>
          <%=msg%>
        </div>
      <% } %>

      <form 
        id='app'
        @submit="checkForm"
        action='/login' 
        method='POST'>

        <p v-if="errors.length" class="alert alert-danger">
          <b>Corriga o(s) seguintes erro(s):</b>
          <ul>
            <li v-for="error in errors">{{ error }}</li>
          </ul>
        </p>

        <div class="form-group">
          <label for="login">Email</label>
          <input type="email" class="form-control" name="email" aria-describedby="emailHelp" 
          placeholder="Escolha seu login" v-model="email">
          <small id="emailHelp" class="form-text text-muted">
            Nós numca vamos compartilhar seu email com alguém.
          </small>
        </div>

        <div class="form-group">
          <label for="password">Senha</label>
          <input type="password" class="form-control" name="password" placeholder="Senha"
          v-model="password">
        </div>

        <button type="submit" class="btn btn-primary">Enviar</button>
      </form>
      
    </div>

    <!-- development version, includes helpful console warnings -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <script>

      const app = new Vue({
        el: '#app',
        data: {
          errors: [],
          email: null,
          password: null
        },  
        methods: {
          checkForm: function(e){
            if(this.email && this.password) {
              return true;
            }
            this.errors = [];
            if(!this.email) {
              this.errors.push("Por favor, preencha o campo email");
            }
            if(!this.password) {
              this.errors.push("Por favor, preencha o campo Senha");
            }
            e.preventDefault();
          }
        }
      });

    </script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" 
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" 
      crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" 
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" 
      crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" 
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" 
      crossorigin="anonymous"></script>

  </body>

</html>